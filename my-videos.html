<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>Ù…ÙˆÙ„Ø¯ Ø±ÙˆØ§Ø¨Ø· ÙŠÙˆØªÙŠÙˆØ¨ Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø©</title>
  <style>
    body { 
      font-family: Tahoma, Arial, sans-serif; 
      background:#121212; color:#fff; text-align:center; padding:40px;
    }
    input, button {
      padding:10px; margin:5px; border-radius:8px; border:0;
    }
    input { width:70%; }
    button { background:#2d6cdf; color:#fff; font-weight:bold; cursor:pointer; }
    #output { margin-top:20px; font-size:14px; word-wrap:break-word; }
    #copyBtn { margin-top:10px; display:none; }
  </style>
</head>
<body>
  <h2>ğŸ¬ ØªØ­ÙˆÙŠÙ„ Ù„ÙŠÙ†Ùƒ ÙŠÙˆØªÙŠÙˆØ¨ â†’ Ù…Ø´Ø§Ù‡Ø¯Ø© Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø©</h2>
  <input type="text" id="ytUrl" placeholder="Ø£Ù„ØµÙ‚ Ù„ÙŠÙ†Ùƒ Ø§Ù„ÙŠÙˆØªÙŠÙˆØ¨ Ù‡Ù†Ø§">
  <button onclick="convert()">ØªØ­ÙˆÙŠÙ„</button>
  
  <div id="output"></div>
  <button id="copyBtn" onclick="copyLink()">ğŸ“‹ Ù†Ø³Ø® Ø§Ù„Ù„ÙŠÙ†Ùƒ</button>

  <script>
    let finalLink = "";

    function toSeconds(t){
      if(!t) return 0;
      if(/^\d+$/.test(t)) return parseInt(t,10);
      let s=0; let m=t.match(/(\d+)(h|m|s)/gi);
      if(m){
        for(let part of m){
          let num=parseInt(part);
          if(part.includes('h')) s+=num*3600;
          else if(part.includes('m')) s+=num*60;
          else if(part.includes('s')) s+=num;
        }
      }
      return s;
    }

    function convert(){
      let url=document.getElementById("ytUrl").value.trim();
      if(!url){ alert("Ø¯Ø®Ù„ Ù„ÙŠÙ†Ùƒ ÙŠÙˆØªÙŠÙˆØ¨"); return; }
      try{
        let u=new URL(url);
        let id="";
        if(u.hostname.includes("youtu.be")){
          id=u.pathname.replace("/","");
        } else {
          id=u.searchParams.get("v");
        }
        if(!id){ alert("Ù„ÙŠÙ†Ùƒ ØºÙŠØ± ØµØ§Ù„Ø­"); return; }
        let start=u.searchParams.get("t")||u.searchParams.get("start");
        let seconds=toSeconds(start);
        finalLink=`https://www.youtube.com/embed/${id}?autoplay=1&mute=1${seconds?`&start=${seconds}`:""}`;
        document.getElementById("output").innerHTML=
          `ğŸ”— Ø§Ù„Ù„ÙŠÙ†Ùƒ Ø§Ù„Ø¬Ø¯ÙŠØ¯:<br><a href="${finalLink}" target="_blank">${finalLink}</a>`;
        document.getElementById("copyBtn").style.display="inline-block";
      } catch(e){ alert("Ù„ÙŠÙ†Ùƒ ØºÙŠØ± ØµØ­ÙŠØ­"); }
    }

    function copyLink(){
      if(!finalLink){ return; }
      navigator.clipboard.writeText(finalLink).then(()=>{
        alert("âœ”ï¸ ØªÙ… Ù†Ø³Ø® Ø§Ù„Ù„ÙŠÙ†Ùƒ Ø¨Ù†Ø¬Ø§Ø­!");
      }).catch(()=>{
        alert("âŒ Ø­ØµÙ„ Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù†Ø³Ø®");
      });
    }
  </script>
</body>
</html>
